import{c as S,j as e,u as R,e as M,d as H,r as l,m as k,X as _}from"./index-BbHmWxeT.js";import{H as B}from"./Helmet-BbXNZb2X.js";import{B as P}from"./Button-DmSsJSq7.js";import{v as L}from"./promos-ZGzVUqs4.js";import{T as V}from"./tag-CJLCSPUx.js";import{C as G}from"./credit-card-gdlJmDk6.js";import{A as J}from"./arrow-right-CCcUOdOh.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=S("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=S("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),X=({amount:c})=>{const i=async()=>{const a=await(await fetch("https://picklemom-server.onrender.com/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:c})})).json();if(!a.success){alert("Order creation failed");return}const o={key:"rzp_test_GR2wb99e6TxwDC",amount:a.order.amount,currency:a.order.currency,order_id:a.order.id,name:"The Pickle Mom",description:"Order Payment",handler:function(u){alert("Payment successful! Payment ID: "+u.razorpay_payment_id)},prefill:{email:"customer@example.com",contact:"9999999999"},theme:{color:"#F37254"}};new window.Razorpay(o).open()};return e.jsx("button",{onClick:i,children:"Pay with Razorpay"})},te=()=>{const{cart:c,cartTotal:i,clearCart:f}=R(),{user:a}=M(),o=H(),[m,u]=l.useState(!1),[d,y]=l.useState(""),[t,x]=l.useState(null),[j,p]=l.useState(""),[b,N]=l.useState(!1),[r,T]=l.useState({fullName:"",email:(a==null?void 0:a.email)||"",phone:"",address:"",city:"",state:"",pincode:"",cardNumber:"",cardExpiry:"",cardCvv:""}),n=s=>{const{name:D,value:I}=s.target;T(O=>({...O,[D]:I}))},z=async()=>{if(d.trim()){N(!0),p("");try{const s=await L(d.trim(),i);x(s)}catch(s){p(s.message||"Invalid promo code"),x(null)}finally{N(!1)}}},F=()=>{y(""),x(null),p("")},q=async s=>{s.preventDefault(),u(!0),setTimeout(()=>{f(),o("/thank-you")},2e3)},g=50,A=.05,v=i,h=(t==null?void 0:t.discountAmount)||0,C=v-h,w=C*A,E=C+g+w;return c.length===0?(o("/cart"),null):e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsx("title",{children:"Checkout | The Pickle Mom"})}),e.jsx("div",{className:"pt-24 pb-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"font-serif text-3xl md:text-4xl font-bold text-secondary-500 mb-6",children:"Checkout"}),e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[e.jsx("h2",{className:"font-medium text-lg text-secondary-500 mb-4",children:"Order Summary"}),e.jsx("div",{className:"divide-y divide-neutral-200",children:c.map(s=>e.jsxs("div",{className:"py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-16 h-16 object-cover rounded"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"font-medium text-secondary-500",children:s.name}),e.jsxs("p",{className:"text-sm text-neutral-500",children:["Quantity: ",s.quantity]})]})]}),e.jsxs("span",{className:"font-medium text-primary-500",children:["₹",(s.price*s.quantity).toFixed(2)]})]},s.id))}),e.jsxs("div",{className:"border-t border-neutral-200 mt-4 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(V,{size:18,className:"text-primary-500"}),e.jsx("span",{className:"font-medium text-secondary-500",children:"Promo Code"})]}),t?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-success-50 border border-success-200 rounded-md",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-success-700",children:t.code}),t.description&&e.jsx("p",{className:"text-sm text-success-600",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-success-700 font-medium",children:["-₹",t.discountAmount.toFixed(2)]}),e.jsx("button",{onClick:F,className:"text-success-600 hover:text-success-800",children:e.jsx(_,{size:16})})]})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:d,onChange:s=>y(s.target.value.toUpperCase()),placeholder:"Enter promo code",className:"flex-1 px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-300"}),e.jsx(P,{onClick:z,variant:"outline",disabled:!d.trim()||b,children:b?"Applying...":"Apply"})]}),j&&e.jsx("p",{className:"text-error-500 text-sm mt-2",children:j})]}),e.jsxs("div",{className:"border-t border-neutral-200 mt-4 pt-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-neutral-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["₹",v.toFixed(2)]})]}),t&&e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("span",{className:"text-success-600",children:["Discount (",t.code,")"]}),e.jsxs("span",{className:"font-medium text-success-600",children:["-₹",h.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-neutral-600",children:"Shipping"}),e.jsxs("span",{className:"font-medium",children:["₹",g.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("span",{className:"text-neutral-600",children:"Tax (5%)"}),e.jsxs("span",{className:"font-medium",children:["₹",w.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-secondary-500",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["₹",E.toFixed(2)]})]}),t&&e.jsxs("div",{className:"text-sm text-success-600 mt-2",children:["You saved ₹",h.toFixed(2)," with promo code ",t.code,"!"]})]})]}),e.jsxs(k.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onSubmit:q,children:[e.jsx(X,{amount:500})," ",e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"font-medium text-lg text-secondary-500 mb-4",children:"Shipping Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",name:"fullName",value:r.fullName,onChange:n,className:"w-full px-4 py-2 rounded-md border border-neutral-300 focus:outline-none focus:ring-2 focus:ring-primary-300",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:n,className:"w-full px-4 py-2 rounded-md border border-neutral-300 focus:outline-none focus:ring-2 focus:ring-primary-300",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:n,className:"w-full px-4 py-2 rounded-md border border-neutral-300 focus:outline-none focus:ring-2 focus:ring-primary-300",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Address"}),e.jsx("input",{type:"text",name:"address",value:r.address,onChange:n,className:"w-full px-4 py-2 rounded-md border border-neutral-300 focus:outline-none focus:ring-2 focus:ring-primary-300",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"City"}),e.jsx("input",{type:"text",name:"city",value:r.city,onChange:n,className:"w-full px-4 py-2 rounded-md border border-neutral-300 focus:outline-none focus:ring-2 focus:ring-primary-300",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"State"}),e.jsx("input",{type:"text",name:"state",value:r.state,onChange:n,className:"w-full px-4 py-2 rounded-md border border-neutral-300 focus:outline-none focus:ring-2 focus:ring-primary-300",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"PIN Code"}),e.jsx("input",{type:"text",name:"pincode",value:r.pincode,onChange:n,className:"w-full px-4 py-2 rounded-md border border-neutral-300 focus:outline-none focus:ring-2 focus:ring-primary-300",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center p-4 bg-neutral-50 rounded-lg",children:[e.jsx(Q,{className:"text-success-500 mr-2",size:20}),e.jsx("span",{className:"text-sm text-neutral-600",children:"Secure Payment"})]}),e.jsxs("div",{className:"flex items-center justify-center p-4 bg-neutral-50 rounded-lg",children:[e.jsx(U,{className:"text-primary-500 mr-2",size:20}),e.jsx("span",{className:"text-sm text-neutral-600",children:"Fast Delivery"})]}),e.jsxs("div",{className:"flex items-center justify-center p-4 bg-neutral-50 rounded-lg",children:[e.jsx(G,{className:"text-secondary-500 mr-2",size:20}),e.jsx("span",{className:"text-sm text-neutral-600",children:"Easy Payment"})]})]}),e.jsx(P,{type:"submit",variant:"primary",size:"lg",className:"w-full",disabled:m,children:m?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing Order..."]}):e.jsxs(e.Fragment,{children:["Complete Order ",e.jsx(J,{size:18,className:"ml-2"})]})}),e.jsx("p",{className:"text-xs text-center text-neutral-500 mt-4",children:"By placing your order, you agree to our Terms of Service and Privacy Policy"})]})]})})})]})};export{te as default};
//# sourceMappingURL=CheckoutPage--LDI_B_o.js.map
